<div class="dialogs-demo">
  <header class="demo-header">
    <h1>Dialog Components</h1>
    <p>
      Modal dialog components with dynamic service-based and template-based
      implementations. Flexible and accessible dialogs for displaying content,
      forms, and user interactions.
    </p>
  </header>

  <div class="cards-container">
    <!-- Dynamic Dialog Example -->
    <app-demo-card
      title="Dynamic Dialog Service"
      [sourceCode]="codeExamples.dynamic"
    >
      <div class="demo-content">
        <p>
          Use the DialogService to programmatically open dialogs with
          components.
        </p>
        <i-button severity="primary" (clicked)="displayExampleDialog()"
          >Open Dynamic Dialog</i-button
        >
      </div>
    </app-demo-card>

    <!-- Basic Template Dialog -->
    <app-demo-card
      title="Basic Template Dialog"
      [sourceCode]="codeExamples.basic"
    >
      <div class="demo-content">
        <p>
          Use the i-dialog component directly in your template for declarative
          dialogs.
        </p>
        <i-button
          severity="secondary"
          [outlined]="true"
          (clicked)="showBasicDialogModal()"
          >Open Basic Dialog</i-button
        >
      </div>

      <!-- Basic Dialog Template -->
      <i-dialog
        [(visible)]="showBasicDialog"
        [closable]="true"
        header="Basic Dialog Example"
        width="20rem"
      >
        <div class="dialog-content">
          <h4>Basic Dialog</h4>
          <p>This is a basic dialog component used directly in the template.</p>
          <p>It demonstrates the dialog component's core functionality:</p>
          <ul>
            <li>Modal overlay</li>
            <li>Header with title</li>
            <li>Closable with X button</li>
            <li>Keyboard (ESC) support</li>
            <li>Click outside to close</li>
          </ul>
        </div>
        <i-dialog-actions
          (cancelEvent)="onBasicDialogHide()"
          (submitEvent)="onBasicDialogHide()"
        ></i-dialog-actions>
      </i-dialog>
    </app-demo-card>

    <!-- Responsive Dialog -->
    <app-demo-card
      title="Responsive Dialog"
      [sourceCode]="codeExamples.responsive"
    >
      <div class="demo-content">
        <p>Dialogs that adapt to different screen sizes using breakpoints.</p>
        <i-button severity="info" (clicked)="showResponsiveDialogModal()"
          >Open Responsive Dialog</i-button
        >
      </div>

      <!-- Responsive Dialog Template -->
      <i-dialog
        [(visible)]="showResponsiveDialog"
        (onHide)="onResponsiveDialogHide()"
        (submitEvent)="onResponsiveDialogHide()"
        (cancelEvent)="onResponsiveDialogHide()"
        header="Responsive Dialog"
        width="50vw"
        [breakpoints]="{
          '960px': '75vw',
          '640px': '90vw'
        }"
      >
        <div class="dialog-content">
          <h4>Responsive Design</h4>
          <p>This dialog adapts to different screen sizes:</p>
          <ul>
            <li><strong>Desktop:</strong> 50% viewport width</li>
            <li><strong>Tablet (≤960px):</strong> 75% viewport width</li>
            <li><strong>Mobile (≤640px):</strong> 90% viewport width</li>
          </ul>
          <p>
            Resize your browser window to see the responsive behavior in action.
          </p>
        </div>
      </i-dialog>
    </app-demo-card>

    <!-- Large Dialog -->
    <app-demo-card title="Large Dialog" [sourceCode]="codeExamples.fullscreen">
      <div class="demo-content">
        <p>Dialogs with larger dimensions for complex content.</p>
        <i-button severity="warning" (clicked)="showFullscreenDialogModal()"
          >Open Large Dialog</i-button
        >
      </div>

      <!-- Fullscreen Dialog Template -->
      <i-dialog
        [(visible)]="showFullscreenDialog"
        (onHide)="onFullscreenDialogHide()"
        (submitEvent)="onFullscreenDialogHide()"
        (cancelEvent)="onFullscreenDialogHide()"
        header="Large Dialog"
        [modal]="true"
        width="80vw"
      >
        <div class="dialog-content">
          <h4>Large Dialog with Listbox</h4>
          <p>
            This dialog demonstrates larger viewport dimensions with a reactive
            listbox component.
          </p>

          <form [formGroup]="largeDialogForm" class="listbox-demo-form">
            <div class="form-field">
              <label for="selectedDepartments">Select Departments:</label>
              <i-listbox
                id="selectedDepartments"
                label="Departments (Reactive Forms + Observable)"
                [options]="departmentOptions$ | async"
                optionLabel="label"
                optionValue="value"
                formControlName="selectedDepartments"
                [multiple]="true"
                [filter]="true"
                [showClear]="true"
                [maxSelectedLabels]="2"
                selectedItemsLabel="{0} departments selected"
              >
              </i-listbox>

              @if (largeDialogForm.get('selectedDepartments')?.invalid &&
              largeDialogForm.get('selectedDepartments')?.touched) {
              <small class="error-message">
                Please select at least one department
              </small>
              }
            </div>
          </form>

          <div class="demo-info">
            <h5>Dynamic Data Features:</h5>
            <ul>
              <li>Options update automatically every 10 seconds</li>
              <li>Random departments may become disabled</li>
              <li>New temporary departments may appear</li>
              <li>Form validation ensures at least one selection</li>
            </ul>

            <h5>Current Form State:</h5>
            <pre>{{ largeDialogForm.value | json }}</pre>

            <h5>Form Valid:</h5>
            <p>{{ largeDialogForm.valid ? "Yes" : "No" }}</p>
          </div>
        </div>
      </i-dialog>
    </app-demo-card>

    <!-- Features Overview -->
    <app-demo-card title="Features">
      <div class="features-grid">
        @for (feature of features; track feature.title) {
        <div class="feature-item">
          <strong>{{ feature.title }}:</strong>
          <span>{{ feature.description }}</span>
        </div>
        }
      </div>
    </app-demo-card>
  </div>
</div>
