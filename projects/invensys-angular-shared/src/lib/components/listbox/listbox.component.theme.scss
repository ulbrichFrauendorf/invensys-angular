@use "../../themes/color-variables.scss" as colors;

@mixin i-listbox-theme() {
  .i-listbox-trigger {
    color: colors.$color-text-primary;
    border: 1px solid colors.$color-surface-border;
    background: colors.$color-surface-ground;

    &:focus,
    &.open {
      outline: none;
      border-color: colors.$color-primary;
      box-shadow: colors.$color-box-shadow;
    }

    &.disabled {
      background: colors.$color-disabled-background;
      border-color: colors.$color-disabled-border;
      color: colors.$color-text-disabled;
    }
  }

  .i-label {
    color: colors.$color-text-secondary;
  }

  .i-label.floated {
    background: transparent;
  }

  .i-listbox-dropdown {
    background: colors.$color-surface-ground;
    border: 1px solid colors.$color-surface-border;

    .i-listbox-filter {
      .i-listbox-search {
        border-color: colors.$color-surface-border;
        background: colors.$color-surface-ground;
        color: colors.$color-text-primary;

        &:focus {
          border-color: colors.$color-primary;
          box-shadow: colors.$color-box-shadow;
        }
      }
    }

    .i-listbox-options {
      background: colors.$color-surface-ground; // Ensure background is set
      border-radius: 0 0 4px 4px; // Match container border radius

      .i-listbox-option {
        color: colors.$color-text-primary;

        &:hover {
          background-color: colors.$color-surface-hover;
        }

        &.selected {
          background-color: colors.$color-surface-hover;
        }

        .i-listbox-checkbox {
          accent-color: colors.$color-primary;
        }
      }

      .i-listbox-no-options {
        color: colors.$color-text-secondary;
      }
    }
  }

  .invalid {
    .i-listbox-trigger {
      border-color: colors.$color-danger;
    }

    .i-label {
      color: colors.$color-danger;
    }
  }
}
